<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Book your luxurious stay at Grand Lynks Homes & Apartments in Gwarinpa, Abuja. Check availability and reserve your room." />
  <meta name="keywords"
    content="Grand Lynks, Booking, Reserve, Hotel, Apartments, Abuja, Gwarinpa, luxury, accommodation" />
  <title>Grand Lynks Homes & Apartments – Booking</title>
  <link rel="icon" href="images/grandfullfront.jpeg" type="image/jpeg" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="booking.css" />
  <link rel="stylesheet" href="preloader.css" />
  <script src="config.js"></script>
</head>

<body class="booking-page">
  <!-- HEADER -->
  <header>
    <div id="navbar-placeholder"></div>
  </header>

  <main class="booking-content-wrapper">
    <div class="wrap">
      <div class="columns">
        <!-- Left stack: Availability → Room selection → Guest details -->
        <div class="col-left">
          <!-- Booking Summary Panel Removed (Duplicate) -->
          <!-- Step 1: Availability -->
          <section class="panel" id="availabilityPanel" aria-labelledby="availabilityTitle">
            <h2 id="availabilityTitle">Book Your Stay</h2>
            <div class="stack">
              <label for="checkin">Check-in</label>
              <input type="date" id="checkin" required />

              <label for="checkout">Check-out</label>
              <input type="date" id="checkout" required />

              <label for="guests">Guests</label>
              <select id="guests" required>
                <option value="">Select guests</option>
                <option>1</option>
                <option>2</option>

              </select>

              <!-- New: Room Selection (Hidden by default, shown if no URL param) -->
              <div id="selectRoomSection" class="stack hidden" style="margin-bottom: 2rem;">
                <h2>Select a Room</h2>
                <p class="muted">Please choose a room to proceed with your booking.</p>
                <select id="roomSelect" class="input-field"
                  style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ccc;">
                  <option value="">-- Choose a Room --</option>
                </select>
                <div id="roomLoading" class="hidden">Loading rooms...</div>
              </div>

              <!-- Button Removed -->
              <div id="availabilityNote" class="muted"></div>
            </div>
          </section>

          <!-- Step 2: Rooms list (from API) -->
          <section class="panel hidden" id="roomsPanel" aria-labelledby="roomsTitle">
            <h3 id="roomsTitle">Available Rooms</h3>
            <div id="roomsList" class="stack" role="list"></div>
            <div id="altNote" class="muted"></div>
          </section>

          <!-- Step 3: Guest details + T&C + Paystack -->
          <section class="panel hidden" id="detailsPanel" aria-labelledby="detailsTitle">
            <h3 id="detailsTitle">Your Details</h3>
            <div class="stack">
              <!-- New Field: Selected Room -->
              <label for="displayRoom">Selected Room</label>
              <input id="displayRoom" type="text" readonly class="readonly-input"
                style="background-color: #f3f3f3; color: #555;" />

              <label for="fullName">Full Name</label>
              <input id="fullName" type="text" required />

              <label for="email">Email</label>
              <input id="email" type="email" required />

              <label for="phone">Phone</label>
              <input id="phone" type="tel" placeholder="+234..." required />

              <label style="display: flex; gap: 8px; align-items: center">
                <input id="acceptTerms" type="checkbox" />
                <span>I agree to the
                  <a href="javascript:void(0)" id="openTerms" style="cursor:pointer; text-decoration:underline;">Terms &
                    Conditions</a></span>
              </label>

              <button id="btnPay" disabled>Confirm Booking</button>
            </div>
          </section>
        </div>

        <!-- Right: Summary -->
        <aside class="summary" aria-live="polite">
          <h3>Booking Summary</h3>
          <div class="row"><span>Room:</span><span id="sumRoom">—</span></div>
          <div class="row"><span>Check-in:</span><span id="sumCheckin">—</span></div>
          <div class="row"><span>Check-out:</span><span id="sumCheckout">—</span></div>
          <div class="row"><span>Guests:</span><span id="sumGuests">—</span></div>
          <div class="row">
            <span>Price (per night):</span><span id="sumPrice">—</span>
          </div>
          <div class="row">
            <span>Nights:</span><span id="sumNights">—</span>
          </div>
          <div class="row total">
            <span>Total:</span><span id="sumTotal">—</span>
          </div>
        </aside>
      </div>
    </div>

    <!-- Terms & Conditions Modal -->
    <div id="termsModalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="termsTitle">
      <div class="modal">
        <header>
          <h2 id="termsTitle">Terms & Conditions</h2>
        </header>
        <div class="content">
          <h3 style="margin-top:0; color:var(--gold); text-align:center; margin-bottom:1rem;">Grand Lynks Homes &
            Apartments</h3>
          <ul style="list-style-type: disc; padding-left: 20px; line-height: 1.6; color: #ffffff !important;">
            <li style="color:#ffffff;">All bookings are subject to availability and confirmation.</li>
            <li style="color:#ffffff;">A reservation is confirmed only after successful payment.</li>
            <li style="color:#ffffff;">Valid government-issued ID is required at check-in.</li>
            <li style="color:#ffffff;">Check-in and check-out times must be strictly observed.</li>
            <li style="color:#ffffff;">Early check-in or late check-out is subject to availability and additional
              charges.</li>
            <li style="color:#ffffff;">Cancellations and refunds are governed by the stated cancellation policy.</li>
            <li style="color:#ffffff;">Maximum room occupancy must not be exceeded.</li>
            <li style="color:#ffffff;">Guests are responsible for any damage to property or missing items.</li>
            <li style="color:#ffffff;">Smoking is not permitted in rooms.</li>
            <li style="color:#ffffff;">Illegal activities, excessive noise, or disruptive behavior are strictly
              prohibited.</li>
            <li style="color:#ffffff;">Management reserves the right to deny service or request checkout without refund
              for policy violations.</li>
            <li style="color:#ffffff;">Personal belongings are the responsibility of the guest.</li>
            <li style="color:#ffffff;">Grand Lynks Homes & Apartments is not liable for loss, theft, or damage to
              personal items.</li>
            <li style="color:#ffffff;">Guest information is handled in line with our privacy policy.</li>
            <li style="color:#ffffff;">Terms may be updated without prior notice.</li>
            <li style="color:#ffffff;">By proceeding with a booking, you agree to these terms and conditions.</li>
          </ul>
        </div>
        <footer>
          <button class="btn btn-secondary" id="closeTerms">Close</button>
          <button class="btn btn-primary" id="acceptAndClose">
            Accept & Close
          </button>
        </footer>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("components/navbar.html?v=" + new Date().getTime())
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("navbar-placeholder").innerHTML = data;

          // Initialize mobile menu functionality
          const mobileToggle = document.querySelector(".mobile-menu-toggle");
          const navLinks = document.querySelector(".nav-links");

          if (mobileToggle && navLinks) {
            mobileToggle.addEventListener("click", function () {
              navLinks.classList.toggle("active");
              mobileToggle.classList.toggle("open");
            });

            // Close mobile menu when clicking on a link
            navLinks.querySelectorAll("a").forEach((link) => {
              link.addEventListener("click", () => {
                navLinks.classList.remove("active");
                mobileToggle.classList.remove("open");
              });
            });
          }
        });

      // API config is handled by booking-integration.js

      // ------- Helpers -------
      const el = (id) => document.getElementById(id);

      // 3) Terms modal logic moved to booking-integration.js


      // btnPay event is handled in booking-integration.js
    });
  </script>
  <script src="preloader.js"></script>
  <script src="booking-integration.js"></script>
  <script src="mobile-enhancements.js"></script>
</body>

</html>