<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Book your luxurious stay at Grand Lynks Homes & Apartments in Gwarinpa, Abuja. Check availability and reserve your room." />
  <meta name="keywords"
    content="Grand Lynks, Booking, Reserve, Hotel, Apartments, Abuja, Gwarinpa, luxury, accommodation" />
  <title>Grand Lynks Homes & Apartments – Booking</title>
  <link rel="icon" href="images/grandfullfront.jpeg" type="image/jpeg" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="booking.css" />
  <link rel="stylesheet" href="preloader.css" />
  <!-- Link booking.css -->
  <!-- Paystack -->
  <script src="config.js"></script>
  <!-- Paystack Removed -->
  <script src="preloader.js"></script>
  <script src="booking-integration.js"></script>
</head>

<body class="booking-page">
  <!-- HEADER -->
  <header>
    <div id="navbar-placeholder"></div>
  </header>

  <main class="booking-content-wrapper">
    <div class="wrap">
      <div class="columns">
        <!-- Left stack: Availability → Room selection → Guest details -->
        <div class="col-left">
          <!-- Booking Summary Panel Removed (Duplicate) -->
          <!-- Step 1: Availability -->
          <section class="panel" id="availabilityPanel" aria-labelledby="availabilityTitle">
            <h2 id="availabilityTitle">Book Your Stay</h2>
            <div class="stack">
              <label for="checkin">Check-in</label>
              <input type="date" id="checkin" required />

              <label for="checkout">Check-out</label>
              <input type="date" id="checkout" required />

              <label for="guests">Guests</label>
              <select id="guests" required>
                <option value="">Select guests</option>
                <option>1</option>
                <option>2</option>

              </select>

              <button id="btnCheck">Check Availability</button>
              <div id="availabilityNote" class="muted"></div>
            </div>
          </section>

          <!-- Step 2: Rooms list (from API) -->
          <section class="panel hidden" id="roomsPanel" aria-labelledby="roomsTitle">
            <h3 id="roomsTitle">Available Rooms</h3>
            <div id="roomsList" class="stack" role="list"></div>
            <div id="altNote" class="muted"></div>
          </section>

          <!-- Step 3: Guest details + T&C + Paystack -->
          <section class="panel hidden" id="detailsPanel" aria-labelledby="detailsTitle">
            <h3 id="detailsTitle">Your Details</h3>
            <div class="stack">
              <label for="fullName">Full Name</label>
              <input id="fullName" type="text" required />

              <label for="email">Email</label>
              <input id="email" type="email" required />

              <label for="phone">Phone</label>
              <input id="phone" type="tel" placeholder="+234..." required />

              <label style="display: flex; gap: 8px; align-items: center">
                <input id="acceptTerms" type="checkbox" />
                <span>I agree to the
                  <a href="#" id="openTerms">Terms & Conditions</a></span>
              </label>

              <button id="btnPay" disabled>Confirm Booking</button>
            </div>
          </section>
        </div>

        <!-- Right: Summary -->
        <aside class="summary" aria-live="polite">
          <h3>Booking Summary</h3>
          <div class="row"><span>Room:</span><span id="sumRoom">—</span></div>
          <div class="row"><span>Check-in:</span><span id="sumCheckin">—</span></div>
          <div class="row"><span>Check-out:</span><span id="sumCheckout">—</span></div>
          <div class="row"><span>Guests:</span><span id="sumGuests">—</span></div>
          <div class="row">
            <span>Price (per night):</span><span id="sumPrice">—</span>
          </div>
          <div class="row">
            <span>Nights:</span><span id="sumNights">—</span>
          </div>
          <div class="row total">
            <span>Total:</span><span id="sumTotal">—</span>
          </div>
        </aside>
      </div>
    </div>

    <!-- Terms & Conditions Modal -->
    <div id="termsModalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="termsTitle">
      <div class="modal">
        <header>
          <h2 id="termsTitle">Terms & Conditions</h2>
        </header>
        <div class="content">
          <p>
            <strong>1. Check-in / Check-out</strong><br />
            Check-in is from 1:00 PM; check-out by 12:00 PM. Early/late options
            are subject to availability and may incur charges.
          </p>
          <p>
            <strong>2. Booking & Payment</strong><br />
            A booking is confirmed only after full payment is
            received. Prices are in NGN and may vary by date and availability.
          </p>
          <p>
            <strong>3. Cancellation & No-Show</strong><br />
            Cancellations within 24 hours of check-in are non-refundable.
            No-shows forfeit payments made.
          </p>
          <p>
            <strong>4. Identification</strong><br />
            Valid government ID are required at check-in.
          </p>
          <p>
            <strong>5. Security & Damages</strong><br />
            Guests are responsible for damages or losses to property during
            their stay. A security deposit may be required.
          </p>
          <p>
            <strong>6. Smoking & Conduct</strong><br />
            Smoking is prohibited in rooms. Excessive noise or misconduct may
            result in eviction without refund.
          </p>
          <p>
            <strong>7. Liability</strong><br />
            The property is not liable for loss of money, jewelry, or valuables
            not deposited with management.
          </p>
          <p>
            <strong>8. Force Majeure</strong><br />
            The property is not responsible for events beyond reasonable control
            (e.g., power outages, strikes, acts of God).
          </p>
          <p>
            <strong>9. Privacy</strong><br />
            Booking details are used to manage your stay and comply with legal
            requirements.
          </p>
          <p>
            <strong>10. Special Requests</strong><br />
            Subject to availability and not guaranteed.
          </p>
        </div>
        <footer>
          <button class="btn btn-secondary" id="closeTerms">Close</button>
          <button class="btn btn-primary" id="acceptAndClose">
            Accept & Close
          </button>
        </footer>
      </div>
    </div>
    </div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("components/navbar.html?v=" + new Date().getTime())
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("navbar-placeholder").innerHTML = data;

          // Initialize mobile menu functionality
          const mobileToggle = document.querySelector(".mobile-menu-toggle");
          const navLinks = document.querySelector(".nav-links");

          if (mobileToggle && navLinks) {
            mobileToggle.addEventListener("click", function () {
              navLinks.classList.toggle("active");
              mobileToggle.classList.toggle("open");
            });

            // Close mobile menu when clicking on a link
            navLinks.querySelectorAll("a").forEach((link) => {
              link.addEventListener("click", () => {
                navLinks.classList.remove("active");
                mobileToggle.classList.remove("open");
              });
            });
          }
        });

      // ------- Config -------
      const API_BASE = window.APP_CONFIG.API_URL;

      // ------- Helpers -------
      const el = (id) => document.getElementById(id);

      // 3) Terms modal
      const modal = el("termsModalBackdrop");
      function openTerms() {
        modal.classList.add("open");
        document.body.style.overflow = "hidden";
      }
      function closeTerms() {
        modal.classList.remove("open");
        document.body.style.overflow = "";
      }

      // ------- Events -------
      el("openTerms").addEventListener("click", (e) => {
        e.preventDefault();
        openTerms();
      });
      el("closeTerms").addEventListener("click", closeTerms);
      el("acceptAndClose").addEventListener("click", () => {
        el("acceptTerms").checked = true;
        // Trigger validation in BookingIntegration
        const event = new Event('change');
        el("acceptTerms").dispatchEvent(event);
        closeTerms();
      });

      el("btnPay").addEventListener("click", handleBookingSubmission);
    });
  </script>
  <script src="mobile-enhancements.js"></script>
</body>

</html>